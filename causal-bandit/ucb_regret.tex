\documentclass{article}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PACKAGES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{times}
\usepackage{fullpage}
\usepackage{latexsym}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{accents}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage[ruled]{algorithm}
\usepackage{algpseudocode}
\usepackage{dsfont}
\usepackage[bf]{caption}
\usepackage{hyperref}
\hypersetup{
    bookmarks=true,         % show bookmarks bar?
    unicode=false,          % non-Latin characters in AcrobatÕs bookmarks
    pdftoolbar=true,        % show AcrobatÕs toolbar?
    pdfmenubar=true,        % show AcrobatÕs menu?
    pdffitwindow=false,     % window fit to page when opened
    pdfstartview={FitH},    % fits the width of the page to the window
    pdftitle={My title},    % title
    pdfauthor={Author},     % author
    pdfsubject={Subject},   % subject of the document
    pdfcreator={Creator},   % creator of the document
    pdfproducer={Producer}, % producer of the document
    pdfkeywords={keyword1} {key2} {key3}, % list of keywords
    pdfnewwindow=true,      % links in new window
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=red,          % color of internal links (change box color with linkbordercolor)
    citecolor=blue,        % color of links to bibliography
    filecolor=magenta,      % color of file links
    urlcolor=cyan           % color of external links
}
\usepackage{amsthm}
\usepackage{natbib}
\usepackage[capitalize]{cleveref}
\usepackage{graphicx}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% MACROS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\defined}{\vcentcolon =}
\newcommand{\rdefined}{=\vcentcolon}
\newcommand{\E}{\mathbb E}
\newcommand{\Var}{\operatorname{Var}}
\newcommand{\calF}{\mathcal F}
\newcommand{\sr}[1]{\stackrel{#1}}
\newcommand{\set}[1]{\left\{#1\right\}}
\newcommand{\ind}[1]{\mathds{1}\!\!\set{#1}}
\newcommand{\argmax}{\operatornamewithlimits{arg\,max}}
\newcommand{\argmin}{\operatornamewithlimits{arg\,min}}
\newcommand{\floor}[1]{\left \lfloor {#1} \right\rfloor}
\newcommand{\ceil}[1]{\left \lceil {#1} \right\rceil}
\newcommand{\eqn}[1]{\begin{align}#1\end{align}}
\newcommand{\eq}[1]{\begin{align*}#1\end{align*}}
\newcommand{\Ber}{\operatorname{Bernoulli}}
\renewcommand{\P}[1]{\operatorname{P}\left\{#1\right\}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% THEOREMS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{assumption}[theorem]{Assumption}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{example}[theorem]{Example}

\title{Regret Bounds for UCB}
\author{Finnian Lattimore}

\begin{document}
\def\ci{\perp\!\!\!\perp}
\maketitle


Assume $\exists$ a convex function, $\psi$, such that:

\begin{equation}
\begin{aligned}
log(E[e^{\lambda(X-E[X]}]) & \leq \psi(\lambda)\\
log(E[e^{\lambda(E[X]-X}]) & \leq \psi(\lambda)
\end{aligned}
\end{equation}
This ensures that the moments of the distribution of X are defined. Assume that at time $t$ we select arm $I_t$ with the highest upper confidence bound:

\begin{equation}
\label{eq:armSelection}
I_{t} = argmax_{i=1...K}\left[\hat{\mu}_{it} + (\psi^{*})^{-1}\frac{\alpha log(t)}{T_{it}}\right]
\end{equation}

Then if $\alpha > 2$,

\begin{equation}
R_n \leq \sum_{i:\Delta i > 0}\left(\frac{\alpha \Delta i}{\psi^{*}(\Delta i/2)}log(n)+\frac{\alpha}{\alpha-2}\right)
\end{equation}





\begin{theorem} If $I_t = i \neq i^*$ at least one of the following statements is true:
\begin{enumerate}
\item The estimated UCB on the best arm, $i^*$, is less than or equal to the actual reward for that arm: $\hat{\mu}_{i^*t} + \hat{\epsilon}_{i^*t} \leq \hat \mu$
\item The estimated reward for arm $i$ is greater than or equal to the estimated CI higher than the true reward for that arm: $\hat \mu_{it} \geq \mu_i + \hat \epsilon_{it}$
\item The number of times we have selected arm $i$ in previous timesteps, $T_{it}$, is less than some bound (that grows logarithmically with $n$). $T_{it} < \frac{\alpha log(n)}{\psi^*(\Delta i/2)}$
\end{enumerate}
\end{theorem}
\begin{proof}
Assume statements 1-3 are all false.
\eq {
3. & \implies T_{it} > \frac{\alpha log(n)}{\psi^*(\Delta i/2)} \\
  & \implies \Delta i > 2 (\psi^*)^{-1} \frac{\alpha log(n)}{T_{it}} \geq 2 (\psi^*)^{-1} \frac{\alpha log(t)}{T_{it}} = 2 \hat \epsilon_{it}\\
  & \implies \Delta i > 2 \hat \epsilon_{it} \\
1. & \implies \hat{\mu}_{i^*t} + \hat{\epsilon}_{i^*t}  > \hat \mu  = \mu_i+\Delta i > \mu_i +  2 \hat \epsilon_{it}\\
& \implies \hat{\mu}_{i^*t} + \hat{\epsilon}_{i^*t}  > \mu_i +  2 \hat \epsilon_{it}\\
2. & \implies \hat \mu_{it} < \mu_i + \hat \epsilon_{it} \\
   & \implies \hat \mu_{it} + \hat \epsilon_{it} < \mu_i +2 \hat \epsilon_{it} \\
   & \implies \hat \mu_{it} + \hat \epsilon_{it} <  \hat{\mu}_{i^*t} + \hat{\epsilon}_{i^*t} \longleftarrow \text { UCB for arm $i < $ UCB for arm $i^*$, which contradicts equation (\ref{eq:armSelection}})
}

\end{proof}

If statements 1. and 2. are both false, then statement 3. places a bound on the number of times we can previously have selected the incorrect arm $i$ in order to select it in this timestep. 



\end{document}